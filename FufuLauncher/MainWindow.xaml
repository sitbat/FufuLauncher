<windowex:WindowEx
    x:Class="FufuLauncher.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:windowex="using:WinUIEx"
    MinWidth="500"
    MinHeight="500"
    PersistenceId="MainWindow"
    mc:Ignorable="d">

    <Grid>
        <Grid x:Name="GlobalBackgroundHost" IsHitTestVisible="False">
            <Image x:Name="GlobalBackgroundImage"
                   Stretch="UniformToFill"
                   Opacity="1"/>
            <MediaPlayerElement x:Name="GlobalBackgroundVideo"
                                Stretch="UniformToFill"
                                Opacity="1"
                                AutoPlay="True"
                                AreTransportControlsEnabled="False"
                                Visibility="Collapsed"/>
    
            <Rectangle x:Name="GlobalBackgroundOverlay"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Stretch"
                       Opacity="0.3"/> 
        </Grid>

        <Frame x:Name="AgreementFrame" Visibility="Collapsed" Background="Transparent"/>

        <NavigationView x:Name="NavigationView"
                        PaneDisplayMode="Left"
                        IsPaneOpen="False"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        SelectionChanged="NavigationView_SelectionChanged"
                        Loaded="NavigationView_Loaded"
                        OpenPaneLength="150"
                        CompactPaneLength="60"
                        Background="Transparent">

            <NavigationView.Resources>
                <Style TargetType="NavigationViewItem">
                    <Setter Property="MinHeight" Value="48"/>
                    <Setter Property="Margin" Value="0,1,0,1"/>
                </Style>
            </NavigationView.Resources>

            <NavigationView.PaneHeader>
                <TextBlock Text="" 
                           FontSize="13" 
                           FontWeight="SemiBold" 
                           Margin="12,8,0,8"
                           VerticalAlignment="Center"/>
            </NavigationView.PaneHeader>

            <NavigationView.MenuItems>
                <NavigationViewItem Content="主页" Tag="FufuLauncher.ViewModels.MainViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE10F;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="面板" Tag="FufuLauncher.ViewModels.ControlPanelModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE770;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="文件" Tag="FufuLauncher.ViewModels.BlankViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7FC;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="账户" Tag="FufuLauncher.ViewModels.AccountViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE77B;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="其他" Tag="FufuLauncher.ViewModels.OtherViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE9F5;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="养成计算" Tag="FufuLauncher.ViewModels.CalculatorViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE835;" FontFamily="Segoe MDL2 Assets" FontSize="28"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <NavigationView.FooterMenuItems>
                <NavigationViewItem Content="设置" Tag="FufuLauncher.ViewModels.SettingsViewModel">
                    <NavigationViewItem.Icon>
                        <FontIcon x:Name="SettingsIcon" Glyph="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="28">
                            <FontIcon.RenderTransform>
                                <RotateTransform CenterX="14" CenterY="14"/>
                            </FontIcon.RenderTransform>
                        </FontIcon>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <Frame x:Name="ContentFrame" Background="Transparent" />
        </NavigationView>

        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <StackPanel x:Name="NotificationPanel" 
                        Orientation="Vertical" 
                        Spacing="8"
                        Width="360"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Margin="0,0,24,24"
                        IsHitTestVisible="True"/>
        </Grid>

        <Grid x:Name="AppTitleBar" 
              Height="40" 
              HorizontalAlignment="Stretch"
              VerticalAlignment="Top"
              Canvas.ZIndex="1000"
              Margin="80,0,140,0"
              IsHitTestVisible="False">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Image x:Name="TitleBarIcon" 
                   Grid.Column="0" 
                   Width="24" 
                   Height="24" 
                   Margin="0,0,0,0"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"/>

            <TextBlock x:Name="TitleBarText"
                       Grid.Column="1" 
                       Text="芙芙启动器"
                       FontSize="13"
                       FontWeight="SemiBold"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"/>
        </Grid>
    </Grid>
</windowex:WindowEx>